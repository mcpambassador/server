# =============================================================================
# MCP AMBASSADOR SERVER - EXAMPLE CONFIGURATION
# =============================================================================
# This is an example configuration for the MCP Ambassador Server with all
# 3 downstream MCPs configured (per ADR-009).
#
# Usage:
#   1. Copy this file to /data/config/ambassador-server.yaml
#   2. Set environment variables: ALPHA_VANTAGE_API_KEY, CONTEXT7_API_KEY, TAVILY_API_KEY
#   3. Adjust settings as needed for your deployment
#   4. Restart the server
#
# See ADR-009 for downstream MCP integration details.
# =============================================================================

# Server configuration
server:
  # Bind address (0.0.0.0 = all interfaces, 127.0.0.1 = localhost only)
  host: 0.0.0.0
  
  # Main MCP protocol port (TLS)
  port: 8443
  
  # Admin API port (TLS) - SEC-M9-07: Expose on localhost only in production
  admin_port: 9443

# Downstream MCP connections
downstream_mcps:
  # Alpha Vantage - Financial market data (HTTP MCP)
  # SEC-M9-06: Pinned version for security
  - name: alpha-vantage
    transport: http
    url: "https://mcp.alphavantage.co/mcp?apikey=${ALPHA_VANTAGE_API_KEY}"
    timeout_ms: 30000
    health_check_interval_ms: 60000

  # Context7 - Documentation and code context (stdio MCP)
  # SEC-M9-06: Pinned version (@0.1.0, not @latest)
  - name: context7
    transport: stdio
    command: ["npx", "-y", "@upstash/context7-mcp@0.1.0"]
    env:
      CONTEXT7_API_KEY: "${CONTEXT7_API_KEY}"
    timeout_ms: 15000

  # Tavily Search - Web search capabilities (stdio MCP)
  # SEC-M9-06: Pinned version (@0.1.0, not @latest)
  - name: tavily-search
    transport: stdio
    command: ["npx", "-y", "tavily-mcp@0.1.0"]
    env:
      TAVILY_API_KEY: "${TAVILY_API_KEY}"
    timeout_ms: 15000
