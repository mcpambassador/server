# =============================================================================
# MCP AMBASSADOR SERVER - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and configure for your deployment
#
# Usage:
#   cp .env.example .env
#   vim .env  # Edit configuration
#   docker-compose up -d
# =============================================================================

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
# Log level: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# OPTIONAL OVERRIDES
# -----------------------------------------------------------------------------
# Uncomment and modify these to override defaults

# Server bind address (default: 0.0.0.0)
# MCP_AMBASSADOR_HOST=0.0.0.0

# Server port (default: 8443)
# MCP_AMBASSADOR_PORT=8443

# Data directory (default: /data in container)
# MCP_AMBASSADOR_DATA_DIR=/data

# Database path (default: /data/ambassador.db)
# MCP_AMBASSADOR_DB_PATH=/data/ambassador.db

# Audit log path (default: /data/audit.jsonl)
# MCP_AMBASSADOR_AUDIT_LOG_PATH=/data/audit.jsonl

# TLS certificate paths (auto-generated if not specified)
# MCP_AMBASSADOR_CA_PATH=/data/certs/ca.pem
# MCP_AMBASSADOR_CERT_PATH=/data/certs/server.pem
# MCP_AMBASSADOR_KEY_PATH=/data/certs/server-key.pem

# TLS server name (default: localhost)
# MCP_AMBASSADOR_TLS_SERVER_NAME=localhost

# -----------------------------------------------------------------------------
# ADMIN AUTHENTICATION & SESSION MANAGEMENT
# -----------------------------------------------------------------------------
# Admin key for accessing the admin UI and API
# If not set, a random admin key will be generated and printed to logs on first boot
# Generate a key: node -e "console.log('amb_ak_' + require('crypto').randomBytes(32).toString('base64url'))"
# AMBASSADOR_ADMIN_KEY=

# Session configuration (hardcoded in server, documented for reference)
# - Session idle timeout: 1800 seconds (30 minutes)
# - Session evaluation interval: 60 seconds (checks for idle/expired sessions)
# - Session sweep interval: 900 seconds (15 minutes, deletes expired sessions)

# -----------------------------------------------------------------------------
# DOWNSTREAM MCP API KEYS (ADR-009)
# -----------------------------------------------------------------------------
# Required for downstream MCP integrations. 
# Set these before running docker-compose up.

# Alpha Vantage (HTTP MCP) — financial market data
# Get your key at: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=

# Context7 (stdio MCP) — documentation and code context
CONTEXT7_API_KEY=

# Tavily Search (stdio MCP) — web search
TAVILY_API_KEY=

# -----------------------------------------------------------------------------
# OAUTH CLIENT CREDENTIALS (ADR-014)
# -----------------------------------------------------------------------------
# GitHub OAuth App credentials
# Create at: https://github.com/settings/developers → New OAuth App
# Callback URL: https://localhost:9443/v1/oauth/callback
GITHUB_OAUTH_CLIENT_ID=
GITHUB_OAUTH_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# PRODUCTION DEPLOYMENT NOTES
# -----------------------------------------------------------------------------
# 1. Use volume encryption for sensitive data at rest
# 2. Backup /data volume regularly (database, certs, audit logs, preshared keys)
# 3. Enable resource limits in docker-compose.yml
# 4. Monitor container health and logs
# 5. Rotate downstream MCP API keys regularly
# 6. Review audit logs for suspicious activity
# 7. Secure admin key (amb_ak_*) - treat as root password
# 8. Create user preshared keys (amb_psk_*) via admin UI for clients
